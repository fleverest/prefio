<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Preferences Objects — preferences • prefio</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Preferences Objects — preferences"><meta name="description" content="A tidy interface for working with ordinal preferences."><meta property="og:description" content="A tidy interface for working with ordinal preferences."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">prefio</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fleverest/prefio/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Preferences Objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/fleverest/prefio/blob/main/R/preferences.R" class="external-link"><code>R/preferences.R</code></a></small>
      <div class="d-none name"><code>preferences.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A tidy interface for working with ordinal preferences.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">long_preferences</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">col</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  rank_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  item_col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  item_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  unused_fn <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  na_action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"drop_rows"</span>, <span class="st">"drop_preferences"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">wide_preferences</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  col <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ranking_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"keep_as_partial"</span>, <span class="st">"drop_preferences"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_preferences</span><span class="op">(</span><span class="va">strings</span>, sep <span class="op">=</span> <span class="st">"&gt;"</span>, equality <span class="op">=</span> <span class="st">"="</span>, descending <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">preferences</span><span class="op">(</span></span>
<span>  strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0L</span><span class="op">)</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"&gt;"</span>,</span>
<span>  equality <span class="op">=</span> <span class="st">"="</span>,</span>
<span>  descending <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'preferences'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S3 method for class 'preferences'</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html" class="external-link">levels</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>data.frame</code> or <code>tibble</code> to extract preferences from</p></dd>


<dt id="arg-col">col<a class="anchor" aria-label="anchor" href="#arg-col"></a></dt>
<dd><p>The name of the new column, as a string or symbol.</p></dd>


<dt id="arg-id-cols">id_cols<a class="anchor" aria-label="anchor" href="#arg-id-cols"></a></dt>
<dd><p>&lt;<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a></code>&gt; The columns by which to
group the dataset to extract a single preference selection.</p></dd>


<dt id="arg-rank-col">rank_col<a class="anchor" aria-label="anchor" href="#arg-rank-col"></a></dt>
<dd><p>&lt;<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a></code>&gt; For <code>data</code> in
long-format: the column representing the rank for the associated item.</p></dd>


<dt id="arg-item-col">item_col<a class="anchor" aria-label="anchor" href="#arg-item-col"></a></dt>
<dd><p>&lt;<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a></code>&gt; For <code>data</code> in
long-format: the column representing the items by name or by index, in which
case the <code>item_names</code> parameter should also be passed.</p></dd>


<dt id="arg-item-names">item_names<a class="anchor" aria-label="anchor" href="#arg-item-names"></a></dt>
<dd><p>The names of the full set of items. This is necessary when
the dataset specifies items by index rather than by name, or when there are
items which do not appear in any preference selection.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>If <code>TRUE</code>, diagnostic messages will be sent to stdout.</p></dd>


<dt id="arg-unused-fn">unused_fn<a class="anchor" aria-label="anchor" href="#arg-unused-fn"></a></dt>
<dd><p>When <code>format="long"</code>, summarise the values of unused columns (those
which are not specified by <code>id_cols</code>, <code>item_col</code>, or <code>rank_col</code>). The default action
is to drop all unused columns.
This can be a named list (e.g. <code>list(column = function)</code>) if you want to apply different
summaries for different columns or keep only specific unused columns, or it can be a
single function to be applied across all unused columns.</p></dd>


<dt id="arg-na-action">na_action<a class="anchor" aria-label="anchor" href="#arg-na-action"></a></dt>
<dd><p>Specifies how to handle NA values.</p><dl><dt><code>long_preferences</code></dt>
<dd>
<dl><dt><code>"drop_rows"</code></dt>
<dd><p>Removes individual rows containing NA values before processing</p></dd>

<dt><code>"drop_preferences"</code></dt>
<dd><p>Removes the entire preference selection that contains any NA</p></dd>


</dl></dd>

<dt><code>wide_preferences</code></dt>
<dd>
<dl><dt><code>"keep"</code></dt>
<dd><p>Interprets rows containing NAs as partial orderings</p></dd>

<dt><code>"drop"</code></dt>
<dd><p>Removes preferences with any NA ranks</p></dd>


</dl></dd>


</dl></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Unused.</p></dd>


<dt id="arg-ranking-cols">ranking_cols<a class="anchor" aria-label="anchor" href="#arg-ranking-cols"></a></dt>
<dd><p>&lt;<code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">tidy-select</a></code>&gt; The columns from which
to extract wide-format preferences.</p></dd>


<dt id="arg-strings">strings<a class="anchor" aria-label="anchor" href="#arg-strings"></a></dt>
<dd><p>A character vector of preference strings</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>Character separating the items in the string (default: "&gt;")</p></dd>


<dt id="arg-equality">equality<a class="anchor" aria-label="anchor" href="#arg-equality"></a></dt>
<dd><p>Character representing equality between items (default: "=")</p></dd>


<dt id="arg-descending">descending<a class="anchor" aria-label="anchor" href="#arg-descending"></a></dt>
<dd><p>If TRUE, parse as descending order preferences.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A vector of preferences.</p></dd>


<dt id="arg-format">format<a class="anchor" aria-label="anchor" href="#arg-format"></a></dt>
<dd><p>The format of the data: one of "ordering", "ranking", or
"long" (see above). By default, <code>data</code> is assumed to be in "long" format.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>preferences</code> object, or a modified tibble with a column of <code>preferences</code> when <code>data</code> is
a <code>data.frame</code> or <code>tibble</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Votes cast by two animals ranking a variety of fruits and vegetables.</span></span></span>
<span class="r-in"><span><span class="co"># This is not real data, I made this up.</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="op">~</span><span class="va">voter_id</span>, <span class="op">~</span><span class="va">species</span>, <span class="op">~</span><span class="va">food</span>, <span class="op">~</span><span class="va">ranking</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="st">"Rabbit"</span>, <span class="st">"Apple"</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="st">"Rabbit"</span>, <span class="st">"Carrot"</span>, <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="st">"Rabbit"</span>, <span class="st">"Banana"</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span>, <span class="st">"Monkey"</span>, <span class="st">"Banana"</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span>, <span class="st">"Monkey"</span>, <span class="st">"Apple"</span>, <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span>, <span class="st">"Monkey"</span>, <span class="st">"Carrot"</span>, <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Process preferencial data into a single column.</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">long_preferences</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">food_preference</span>,</span></span>
<span class="r-in"><span>    id_cols <span class="op">=</span> <span class="va">voter_id</span>,</span></span>
<span class="r-in"><span>    item_col <span class="op">=</span> <span class="va">food</span>,</span></span>
<span class="r-in"><span>    rank_col <span class="op">=</span> <span class="va">ranking</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   voter_id           food_preference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;prefrncs&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>        1 [Apple &gt; Carrot &gt; Banana]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>        2 [Banana &gt; Apple &gt; Carrot]</span>
<span class="r-in"><span><span class="co"># The same, but keep the species data.</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu">long_preferences</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">food_preference</span>,</span></span>
<span class="r-in"><span>    id_cols <span class="op">=</span> <span class="va">voter_id</span>,</span></span>
<span class="r-in"><span>    item_col <span class="op">=</span> <span class="va">food</span>,</span></span>
<span class="r-in"><span>    rank_col <span class="op">=</span> <span class="va">ranking</span>,</span></span>
<span class="r-in"><span>    unused_fn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="va"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   voter_id species           food_preference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;prefrncs&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>        1 Rabbit  [Apple &gt; Carrot &gt; Banana]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>        2 Monkey  [Banana &gt; Apple &gt; Carrot]</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Floyd Everest, Heather Turner, Damjan Vukcevic.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

