<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create a preferences object for representing Ordinal Preference datasets."><title>Preferences Object — preferences • prefio</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Preferences Object — preferences"><meta property="og:description" content="Create a preferences object for representing Ordinal Preference datasets."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">prefio</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/fleverest/prefio/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Preferences Object</h1>
      <small class="dont-index">Source: <a href="https://github.com/fleverest/prefio/blob/HEAD/R/preferences.R" class="external-link"><code>R/preferences.R</code></a></small>
      <div class="d-none name"><code>preferences.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create a <code>preferences</code> object for representing Ordinal Preference datasets.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre><code>preferences(
  data,
  format = c("long", "ordering", "ranking"),
  id = NULL,
  rank = NULL,
  item = NULL,
  item_names = NULL,
  frequencies = NULL,
  aggregate = FALSE,
  verbose = TRUE,
  ...
)

# S3 method for preferences
[(x, i, j, ..., by.rank = FALSE, as.ordering = FALSE)

as.preferences(x, ...)

# S3 method for grouped_preferences
as.preferences(x, aggregate = FALSE, verbose = TRUE, ...)

# S3 method for default
as.preferences(
  x,
  format = c("long", "ranking", "ordering"),
  id = NULL,
  item = NULL,
  rank = NULL,
  item_names = NULL,
  aggregate = FALSE,
  verbose = TRUE,
  ...
)

# S3 method for matrix
as.preferences(
  x,
  format = c("long", "ranking"),
  id = NULL,
  item = NULL,
  rank = NULL,
  item_names = NULL,
  aggregate = FALSE,
  verbose = TRUE,
  ...
)

# S3 method for aggregated_preferences
as.preferences(x, ...)

# S3 method for preferences
format(x, width = 40L, ...)</code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame or matrix in one of three formats:</p><dl><dt>"ordering"</dt>
<dd><p>Orderings must be a data frame with list-valued
columns. Each row represents an ordering of the items
from first to last, representing ties by a list of
vectors corresponding to the items.</p></dd>

<dt>"ranking"</dt>
<dd><p>Each row assigns a rank to each item, with columns
representing items.  Note that rankings will be converted
to 'dense' rankings in the output (see Details).</p></dd>

<dt>"long"</dt>
<dd><p>Three columns: an <code>id</code> column grouping the rows which
correspond to a single set of preferences, an
<code>item</code> column specifying (either by index or by
name) the item each row refers to, and a <code>rank</code>
column specifying the rank for the associated
item.</p></dd>


</dl></dd>


<dt>format</dt>
<dd><p>The format of the data: one of "ordering", "ranking", or
"long" (see above). By default, <code>data</code> is assumed to be in "long" format.</p></dd>


<dt>id</dt>
<dd><p>For <code>data</code> in long-format: the column representing the
preference set grouping.</p></dd>


<dt>rank</dt>
<dd><p>For <code>data</code> in long-format: the column representing the
rank for the associated item.</p></dd>


<dt>item</dt>
<dd><p>For <code>data</code> in long-format: the column representing
the items by name or by index, in which case the
<code>item_names</code> parameter should also be passed, or the items will be named as
integers.</p></dd>


<dt>item_names</dt>
<dd><p>The names of the full set of items. When loading data using
integer-valued indices in place of item names, the <code>item_names</code> character
vector should be in the correct order.</p></dd>


<dt>frequencies</dt>
<dd><p>An optional integer vector containing the number of
occurences of each preference. If provided, the method will return a
<code><a href="aggregate.preferences.html">aggregated_preferences</a></code> object with the
corresponding frequencies.</p></dd>


<dt>aggregate</dt>
<dd><p>If <code>TRUE</code>, aggregate the preferences via
<code><a href="aggregate.preferences.html">aggregate.preferences</a></code> before returning. This
returns an <code><a href="aggregate.preferences.html">aggregated_preferences</a></code> object.</p></dd>


<dt>verbose</dt>
<dd><p>If <code>TRUE</code>, diagnostic messages will be sent to stdout.</p></dd>


<dt>...</dt>
<dd><p>Unused.</p></dd>


<dt>x</dt>
<dd><p>The <code>preferences</code> object to subset.</p></dd>


<dt>i</dt>
<dd><p>The index of the preference-set to access.</p></dd>


<dt>j</dt>
<dd><p>The item names or indices to project onto, e.g. if <code>j = 1</code> the
preferences will be projected only onto the first item; if <code>by.rank = TRUE</code>
<code>j</code> corresponds to the rank of the items to subset to, e.g. if <code>j = 1</code> then
preferences will be truncated to only contain their highest-preference.</p></dd>


<dt>by.rank</dt>
<dd><p>When <code>FALSE</code>, the index <code>j</code> corresponds to items, when true
the index corresponds to rank.</p></dd>


<dt>as.ordering</dt>
<dd><p>When <code>FALSE</code>, returns a <code>preferences</code> object:
internally rows \(i\) contain the ranking assigned to each item
in preference \(p_i\). When <code>TRUE</code>, returns a data frame where
columns group the items by rank.</p></dd>


<dt>width</dt>
<dd><p>The width in number of characters to format each preference,
truncating by "..." when they are too long.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>By default, a <code>preferences</code> object, which is a data frame with
list-valued columns corresponding to preferences on the items. This may
be an ordering on subsets of the items in the case of ties, or a
potentially-partial strict ordering. In the case of partial or tied
preferences, some entries may be empty lists.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Ordinal preferences can order every item, or they can order a subset. Some
ordinal preference datasets will contain ties between items at a given rank.
Hence, there are four distinct types of preferential data:</p><dl><dt><code>soc</code></dt>
<dd><p>Strict Orders - Complete List</p></dd>

<dt><code>soi</code></dt>
<dd><p>Strict Orders - Incomplete List</p></dd>

<dt><code>toc</code></dt>
<dd><p>Orders with Ties - Complete List</p></dd>

<dt><code>toi</code></dt>
<dd><p>Orders with Ties - Incomplete List</p></dd>


</dl><p>The data type is stored alongside the <code>preferences</code> as an attribute
<code>attr(preferences, "preftype")</code>. The data type is determined automatically.
If every preference ranks every item, then the data type will be
"soc" or "soi". Similarly, if no preference contains a tie the data type
will be "toc" or "toi".</p>
<p>A set of preferences can be represented either by <code>ranking</code> or by
<code>ordering</code>. These correspond to the two ways you can list a set of
preferences in a vector:</p><dl><dt><code>ordering</code></dt>
<dd><p>The items are listed in order of most preferred to least
preferred, allowing for multiple items being in the
same place in the case of ties.</p></dd>

<dt><code>ranking</code></dt>
<dd><p>A rank is assigned to each item.  Conventionally, ranks are
integers in increasing order (with larger values
indicating lower preference), but they can be any
ordinal values.  Any given rankings will be converted
to 'dense' rankings: positive integers from 1 to some
maximum rank, with no gaps between ranks.</p></dd>


</dl><p>When reading preferences from an <code>ordering</code> matrix, the index on the
items is the order passed to the <code>item_names</code> parameter. When reading from
a <code>rankings</code> matrix, if no <code>item_names</code> are provided, the order is inferred
from the named columns.</p>
<p>A <code>preferences</code> object can also be read from a long-format matrix, where
there are three columns: <code>id</code>, <code>item</code> and <code>rank</code>. The <code>id</code> variable groups
the rows of the matrix which correspond to a single set of preferences, which
the <code>item:rank</code>, pairs indicate how each item is ranked. When reading a
matrix from this format and no <code>item_names</code> parameter is passed, the order is
determined automatically.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># create rankings from data in long form</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example long-form data</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  item <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">LETTERS</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span><span class="op">]</span>, <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    <span class="va">LETTERS</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">4</span><span class="op">)</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">4</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># * Set #1 has two different ranks for the same item (item C</span></span></span>
<span class="r-in"><span><span class="co"># has rank 1 and 2). This item will be excluded from the preferences.</span></span></span>
<span class="r-in"><span><span class="co"># * All ranks are missing in set #2, a technically valid partial ordering</span></span></span>
<span class="r-in"><span><span class="co"># * Some ranks are missing in set #3, a perfectly valid partial ordering</span></span></span>
<span class="r-in"><span><span class="co"># * Set #4 has inconsistent ranks for two items, and a rank with a</span></span></span>
<span class="r-in"><span><span class="co"># missing item.</span></span></span>
<span class="r-in"><span><span class="co"># * Set #5 is not a dense ranking. It will be converted to be dense and then</span></span></span>
<span class="r-in"><span><span class="co"># inferred to be a regular partial ordering with ties.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span><span class="op">$</span><span class="va">rank</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`1`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id item rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   1    C    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  4    A    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`2`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id item rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   1    C    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  4 &lt;NA&gt;    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17  5    C    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  5    D    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`3`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id item rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   1    B    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   3    B    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14  4    B    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19  5    E    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`4`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    id item rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1    A    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10  3    C    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15  4    A    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating a preferences object with this data will attempt to resolve these</span></span></span>
<span class="r-in"><span><span class="co"># issues automatically, sending warnings when assumptions need to be made.</span></span></span>
<span class="r-in"><span><span class="fu">preferences</span><span class="op">(</span><span class="va">x</span>, id <span class="op">=</span> <span class="st">"id"</span>, item <span class="op">=</span> <span class="st">"item"</span>, rank <span class="op">=</span> <span class="st">"rank"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Dropping rows containing `NA`.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Duplicated rankings per item detected: only the highest ranks will be used.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "C &gt; B &gt; A" "B &gt; C"     "A &gt; B"     "C = D &gt; E"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert an existing matrix of rankings to a preferences object.</span></span></span>
<span class="r-in"><span><span class="va">rnk</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">0</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  <span class="fl">4</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>,</span></span>
<span class="r-in"><span>  <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">3</span>, <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">6</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">rnk</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"pear"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rnk</span> <span class="op">&lt;-</span> <span class="fu">as.preferences</span><span class="op">(</span><span class="va">rnk</span>, format <span class="op">=</span> <span class="st">"ranking"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert an existing data frame of orderings to a preferences object.</span></span></span>
<span class="r-in"><span><span class="va">e</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># short-hand for empty ranks</span></span></span>
<span class="r-in"><span><span class="va">ord</span> <span class="op">&lt;-</span> <span class="fu">preferences</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="va">e</span>, <span class="va">e</span><span class="op">)</span>, <span class="co"># apple, banana</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"pear"</span>, <span class="st">"apple"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"pear"</span><span class="op">)</span>, <span class="st">"apple"</span>, <span class="va">e</span>, <span class="va">e</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="va">e</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"banana"</span>, <span class="st">"orange"</span><span class="op">)</span>, <span class="st">"apple"</span>, <span class="va">e</span>, <span class="va">e</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"orange"</span>, <span class="va">e</span><span class="op">)</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  format <span class="op">=</span> <span class="st">"ordering"</span>,</span></span>
<span class="r-in"><span>  item_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"banana"</span>, <span class="st">"orange"</span>, <span class="st">"pear"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access the first three sets of preferences</span></span></span>
<span class="r-in"><span><span class="va">ord</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1 &gt; banana"                     "banana &gt; orange &gt; pear &gt; apple"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "banana = orange = pear &gt; apple"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Truncate preferences to the top 2 ranks</span></span></span>
<span class="r-in"><span><span class="va">ord</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, by_rank <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1 &gt; banana" "banana"     "banana"     "banana"     "banana"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6] "blank"     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Exclude pear from the rankings</span></span></span>
<span class="r-in"><span><span class="va">ord</span><span class="op">[</span>, <span class="op">-</span><span class="fl">4</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "1 &gt; banana"              "banana &gt; orange &gt; apple"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3] "banana = orange &gt; apple" "apple &gt; banana &gt; orange"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "banana = orange &gt; apple" "apple &gt; orange"         </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the highest-ranked items and return as a data.frame of orderings</span></span></span>
<span class="r-in"><span><span class="va">ord</span><span class="op">[</span>, <span class="fl">1</span>, by_rank <span class="op">=</span> <span class="cn">TRUE</span>, as.ordering <span class="op">=</span> <span class="cn">TRUE</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Rank1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Convert the preferences to a ranking matrix</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">ord</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       1 banana orange pear apple  2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  1      2     NA   NA    NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] NA      1      2    3     4 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] NA      1      1    1     2 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] NA      2      3   NA     1 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,] NA      1      1   NA     2 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6,] NA     NA      3    2     1 NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"preftype")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "toi"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get the rank of apple in the third preference-set</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">ord</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NA </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Get all the ranks assigned to apple as a vector</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">ord</span><span class="op">)</span><span class="op">[</span>, <span class="st">"apple"</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA  4  2  1  2  1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Floyd Everest, Heather Turner, Damjan Vukcevic.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

